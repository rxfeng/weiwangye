<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <link rel="stylesheet" href="../css/api.css"/>
    <link rel="stylesheet" href="../css/aui.2.0.css"/>
    <link rel="stylesheet" href="../css/swiper.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../font/font-awesome-4.7.0/css/font-awesome.css" />
    <style type="text/css">
    	.jrtt-login{
    		margin-top: 100px;
    	}
    	.jrtt-login .jrtt-login-input{
    		margin-bottom: 20px;
    	}
    	.jrtt-login .jrtt-login-input input{
    		height: 30px;
    		width: 80%;
    		margin: 0 auto;
    		border-radius: 30px;
    		border:1px solid #ccc;
    		padding-left: 20px;
    	}
    	.jrtt-login .jrtt-login-tel{
    		position: relative;
    	}
    	.jrtt-login .jrtt-login-input input:focus{
    		border:1px solid #ff8e0c;
    	}
    	.jrtt-login .jrtt-login-btn input{
    		padding: 0;
    		text-align: center;
    		background: #ff8e0c;
    		color: #fff;
    		border: 0;
    	}
    	.jrtt-login .jrtt-login-btn input::-webkit-input-placeholder {
    		color:#fff;
    		font-size: 18px;
    	}
    	.jrtt-login .jrtt-login-yzm{
    		width: 100px;
    		height: 100%;
    		line-height: 46px;
    		text-align: center;
    		position: absolute;
    		right: 10%;
    		bottom: 0px;
    		font-size:14px;
    		border-left: 1px solid #ccc;
    	}
    	.jrtt-chang-skin{
    		margin-left: 10px;
    		font-size: 18px;
    		font-weight: bold;
    	}
    	.jrtt-skin{
    		display: flex;
    	}
    	.jrtt-skin div{
    		width: 80px;
    		height: 30px;
    		margin: 10px;
    		border-radius: 30px;
    	}
    	
    	.jrtt-skin div:nth-of-type(1){
    		background: #ff8e0c;
    	}
    	.jrtt-skin div:nth-of-type(2){
    		background: skyblue;
    	}
    	.jrtt-skin div:nth-of-type(3){
    		background: pink;
    	}
    	.jrtt-red{
    		color:red;
    	}
    	.jrtt-city{
			display: flex;
			flex-wrap: wrap;
			
		}
		.jrtt-city-txt{
			padding: 0 10px;
			border: 1px solid #ccc;
			border-radius: 3px;
			margin:10px;
			line-height: 25px;
		}
    </style>
</head>
<body>
	<header class="aui-bar aui-bar-nav jrtt-header" id="aui-header">
		<a class="aui-pull-left aui-btn" data-item="forword" data-url="" data-fn="pop">
	        <span class="aui-iconfont aui-icon-left"></span>
	    </a>
	    <div class="aui-title jrtt-header-title">新疆电信</div>
	</header>
	<div class="jrtt-login">
		<div class="jrtt-login-input jrtt-login-tel">
			<input type="tel" placeholder="手机号" value=""/>
			<div class="jrtt-login-yzm" onclick="pin(this);">发送验证码</div>
		</div>
		<div class="jrtt-login-input jrtt-login-password">
			<input type="tel" placeholder="请输入验证码" value=""/>
		</div>
		<div class="jrtt-login-input jrtt-login-btn" data-item="forword" data-url="jrtt-my-file.html" data-fn="login">
			<input type="text" placeholder="进入微网页" disabled="disabled"/>
		</div>
	</div>
	<p class="jrtt-chang-skin">更换皮肤</p>
	<div class="jrtt-skin">
		<div onclick="one();"></div>
		<div onclick="two();"></div>
		<div onclick="three();"></div>
	</div>
	<p class="jrtt-chang-skin">城市更换</p>
	<div class="jrtt-city"></div>
	<div class="jrtt-package-type">
		<div class="jrtt-package-type-item">
			<div class="jrtt-package-type-top">
				<p class="jrtt-package-type-item-txt">套餐类型：</p>
				<div class="aui-list-item-inner">
	               <label class="jrtt-package-type-list"><input class="aui-radio" type="radio" name="radio2" value="不限" checked> <p>不限</p></label>
	               <label class="jrtt-package-type-list"><input class="aui-radio" type="radio" name="radio2" value="3G"> <p>3G</p></label>
	               <label class="jrtt-package-type-list"><input class="aui-radio" type="radio" name="radio2" value="4G"> <p>4G</p></label>
	            </div>
			</div>
		</div>
		
		<div class="jrtt-package-type-item">
			<div class="jrtt-package-type-top">
				<p class="jrtt-package-type-item-txt">通话时长：</p>
				<div class="jrtt-package-type-item-input jrtt-package-type-item-time">
					<input type="number" value="0"/><p>分钟</p>
				</div>
			</div>
			<div class="aui-range jrtt-package-type-item-range">
		        <input type="range" class="aui-range" value="0" max="100" min="0" step="1" id="range1" />
		  </div>
		   <div style="width: 100%;padding: 0 10px;">
		   		<div class="jrtt-package-type-item-line">
					<p></p>
					<p></p>
					<p></p>
					<p></p>
					<p></p>
			   </div>
			   <div class="jrtt-package-item-shuzi">
			   	    <p>0</p>
			   	    <p>400</p>
			   	    <p>800</p>
			   	    <p>1200</p>
			   	    <p>1600</p>
			   	    <p>2000</p>
			   </div>
		   </div>
		</div>
		
		<div class="jrtt-package-type-item">
			<div class="jrtt-package-type-top">
				<p class="jrtt-package-type-item-txt">短信条数：</p>
				<div class="jrtt-package-type-item-input jrtt-package-type-item-num">
					<input type="number" value="0"/><p>条</p>
				</div>
			</div>
			<div class="aui-range jrtt-package-type-item-range">
		        <input type="range" class="aui-range" value="0" max="100" min="0" step="1" id="range2"/>
		    </div>
		    <div style="width: 100%;padding: 0 10px;">
		   		<div class="jrtt-package-type-item-line">
					<p></p>
					<p></p>
					<p></p>
					<p></p>
					<p></p>
			   </div>
			   <div class="jrtt-package-item-shuzi">
			   	    <p>0</p>
			   	    <p>200</p>
			   	    <p>400</p>
			   	    <p>600</p>
			   	    <p>800</p>
			   	    <p>1000</p>
			   </div>
		   </div>
		</div>
		
		<div class="jrtt-package-type-item">
			<div class="jrtt-package-type-top">
				<p class="jrtt-package-type-item-txt">上网流量：</p>
				<div class="jrtt-package-type-item-input jrtt-package-type-item-MB">
					<input type="number" value="0"/><p>MB</p>
				</div>
			</div>
			<div class="aui-range jrtt-package-type-item-range">
		        <input type="range" class="aui-range" value="0" max="100" min="0" step="1" id="range3"/>
		    </div>
		    <div style="width: 100%;padding: 0 10px;">
		   		<div class="jrtt-package-type-item-line">
					<p></p>
					<p></p>
					<p></p>
					<p></p>
					<p></p>
			   </div>
			   <div class="jrtt-package-item-shuzi">
			   	    <p>0</p>
			   	    <p>4096</p>
			   	    <p>8192</p>
			   	    <p>12288</p>
			   	    <p>16384</p>
			   	    <p>20480</p>
			   </div>
		   </div>
		</div>
		
		<div class="jrtt-btn-compute-box">
			<button class="jrtt-btn-compute" onclick="compute();">开始计算</button>
		</div>
		
		<!--<div class="aui-list-item-input">
            <input type="checkbox" class="aui-switch" checked>
        </div>-->
	</div>
	<div style="height: 100px;"></div>
</body>
<script id="jrtt-city-template" type="text/x-handlebars-template">
	{{#each list}}
		<!--<p class="jrtt-city-txt" onclick="city('{{city}}',this);">{{city}}</p>-->
		<p class="jrtt-city-txt" onclick="city(this);">{{city}}</p>
	{{/each}}
</script>
<script src="../js/jquery-1.10.2.js"></script>
<script src="../js/handlebars-v1.3.0.js"></script>
<script src="../js/api.js"></script>
<script src="../js/aui-tab.js"></script>
<script src="../js/aui-toast.js"></script>
<script src="../js/touch.js" ></script>
<script src="../js/swiper.js"></script>
<script src="../js/aui-skin.js"></script>
<script src="../js/aui-range.js"></script>
<script src="../js/common.js"></script>
<script src="../model/model.js"></script>
<script>
	var timer = null;
	var toast = new auiToast({})
	var initApp = function(){
		
	}
	var initHtml = function(){
		
	}
	var webfun = function(that){
		var tel = $('.jrtt-login-tel>input').val();
		var password = $('.jrtt-login-password>input').val();
		if($(that).attr("data-fn")=="login"){
			 if(tel==1 && password==1){
				toast.success({
                    title:"登录成功",
                    duration:2000
              });
               location.replace('jrtt-my-file.html');
			 }else{
			 	 toast.fail({
                    title:"登录失败",
                    duration:2000
             	});
			} 
            return false;
		}else if($(that).attr("data-fn")=="pop"){
			window.history.back(-1); 
		}
	}
	var appfun = function(that,fn){
		var url = $(that).attr("data-url");
		switch(fn){
			case "login":
				var tel = $('.jrtt-login-tel>input').val();
				var password = $('.jrtt-login-password>input').val();
				if(tel==1 && password==1){
					toast.success({
	                    title:"登录成功",
	                    duration:2000
	                });
//					var jsfun = "location.reload();console.log(111)"
//					api.execScript({
//					    name: 'index',
//					    script: jsfun
//					});
					
					api.openWin({
			            name: url.slice(0,url.length-5),
			            url: url,
			        	animation:{
			        		type:"movein",
			        		duration:0
			        	}
			        });
			        api.closeWin({
			        	name:"jrtt-login",
			        	animation:{
			        		type:"movein",
			        		duration:0
			        	}
			        });
				}else{ 
				 	toast.fail({
	                    title:"登录失败",
	                    duration:2000
	               });
				}
				break;
    		case "pop":
    			api.closeWin();
    			break;
    		default:
    			api.openWin({
		            name: url.slice(0,url.length-5),
		            url: url
		        });
		}
	}
	var num = 10;
	function pin(that){
		var tel = $('.jrtt-login-tel>input').val();
		if(checkMobile(tel)){
			//请求验证码
			if(num==10){
				toast.success({
	                title:"已发送验证码",
	                duration:2000
	            });
				timer = setInterval(function(){
		       		if(num < 0){
		       			clearInterval(timer);
		       			num = 10;
		       			$(that).html('重新发送');
		       			$(that).addClass('jrtt-red')
		       		}else{
		       			$(that).removeClass('jrtt-red')
		       			$(that).html('剩余'+ num-- +'s');
		       		}
		       	},1000);
			}
           	
		}else{
			toast.fail({
                title:"手机号有误",
                duration:2000
            });
		}
	} 
	var range1 = new auiRange({
	    element:document.getElementById("range1") //滑块容器
	},function(ret){
	    $('.jrtt-package-type-item-time>input').val(ret.value*20)
	});
	var range2 = new auiRange({
	    element:document.getElementById("range2") //滑块容器
	},function(ret){
	    $('.jrtt-package-type-item-num>input').val(ret.value*10)
	});
	var range3 = new auiRange({
	    element:document.getElementById("range3") //滑块容器
	},function(ret){
	    $('.jrtt-package-type-item-MB>input').val(Math.round(ret.value*204.8))
	});
	var max ;
	$('.jrtt-package-type-item-time>input').on('blur',function(){
		fanwei(this,'#range1',2000);
	});
	$('.jrtt-package-type-item-num>input').on('blur',function(){
		fanwei(this,'#range2',1000);
	});

	$('.jrtt-package-type-item-MB>input').on('blur',function(){
		fanwei(this,'#range3',20480);
	})
	function fanwei(that,obj,max){
		if($(that).val()>=0 && $(that).val()<=max){
			$(obj).val($(that).val()/(max/100)) 
		}else if($(that).val()<0){
			$(obj).val(0);
			$(that).val(0)
		}else if($(that).val()>max){
			$(obj).val(max);
			$(that).val(max)
		}
	}
	function compute(){
		var radios = document.getElementsByName("radio2");
		for(var i = 0 ;i < radios.length;i++){
			if(radios[i].checked){
				console.log("套餐类型："+radios[i].value+"，通话时长"+$('.jrtt-package-type-item-time>input').val()+'，短信条数：'+$('.jrtt-package-type-item-num>input').val()+'，上网流量：'+$('.jrtt-package-type-item-MB>input').val());
//				console.log($(radios[i]).siblings('p')[0].innerHTML)
			}
		}
	}
</script>
<script>
	//更换城市
	getCity(
		function(data){
			var myTemplate = Handlebars.compile($("#jrtt-city-template").html());
			$('.jrtt-city').html(myTemplate(data));
		},
		function(){
			console.log('error');
		},
		'ajax请求页面传入的值'
	)
	function city(obj){
		console.log($(obj).html());
		$('.jrtt-city p').css('font-weight','normal');
		$(obj).css('font-weight','700');
	}
	$('.aui-switch').on('tap',function(){
		console.log(this.checked);
	});
	
</script>
</html>
